!function(t){"use strict";var a={},n={},e=null;a.setStructure=function(t){return e=t,!0},a.totalEnergy=function(){return n.totalEnergy()},a.updateStructure=function(){t.postMessage({method:"updateStructure",data:e})},t.onmessage=function(n){var e=n.data&&n.data.method;"function"==typeof a[e]&&t.postMessage({method:e,data:a[e].call(a,n.data.data)})},n.distance=function(t,a){var n=e.atoms[t],r=e.atoms[a],o=n.x-r.x,u=n.y-r.y,s=n.z-r.z;return Math.sqrt(o*o+u*u+s*s)},n.morse=function(t,a){var n=Math.exp(t.b*(t.R0-a));return t.D0*n*(n-2)},n.totalEnergy=function(){var t,a,r=0,o=e.bonds;for(t=0,a=o.length;a>t;t++)r+=n.morse(o[t].potential,n.distance(o[t].iAtm,o[t].jAtm));return r}}(this);